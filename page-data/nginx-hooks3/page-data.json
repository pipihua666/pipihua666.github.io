{"componentChunkName":"component---theme-src-templates-post-tsx","path":"/nginx-hooks3","result":{"data":{"post":{"id":"b48d4c82-b192-52d6-b763-e5387ee42f3e","headings":[{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":3},{"depth":2}],"frontmatter":{"title":"Hooksæ ¸å¿ƒ03","path":"/nginx-hooks3","tags":["React"],"excerpt":"3ä¸ªå¸¸ç”¨å†…ç½®hooksï¼šè§£å†³å‡½æ•°ç»„ä»¶ä¸­é‡åˆ°çš„ç‰¹å®šé—®é¢˜","created":"2021-06-01 23:00","createdPretty":"01 June, 2021","updated":"2021-06-07 21:57","updatedPretty":"07 June, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABkdz9hxMH/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAISAwH/2gAIAQEAAQUCVMzueRCF9LKP/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQMBAT8BiP/EABURAQEAAAAAAAAAAAAAAAAAAAAh/9oACAECAQE/Aar/xAAYEAACAwAAAAAAAAAAAAAAAAAAIDFBkf/aAAgBAQAGPwK8JX//xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhMVGR/9oACAEBAAE/IXNtBBh/B0wxW0i+FH//2gAMAwEAAgADAAAAEL8//8QAFhEAAwAAAAAAAAAAAAAAAAAAABFR/9oACAEDAQE/EFAoP//EABYRAQEBAAAAAAAAAAAAAAAAAAARUf/aAAgBAgEBPxC6U//EABoQAQADAAMAAAAAAAAAAAAAAAEAETEhQXH/2gAIAQEAAT8Qoxx6VBNQhzG015DBs3SKXxL2mPWoez//2Q==","aspectRatio":1.5037593984962405,"src":"/static/5d09d84d218ee9db9c12c56401c91adc/f2cbb/header.jpg","srcSet":"/static/5d09d84d218ee9db9c12c56401c91adc/8850c/header.jpg 200w,\n/static/5d09d84d218ee9db9c12c56401c91adc/da113/header.jpg 400w,\n/static/5d09d84d218ee9db9c12c56401c91adc/f2cbb/header.jpg 800w,\n/static/5d09d84d218ee9db9c12c56401c91adc/c26c2/header.jpg 1200w,\n/static/5d09d84d218ee9db9c12c56401c91adc/9352a/header.jpg 1600w,\n/static/5d09d84d218ee9db9c12c56401c91adc/4fb49/header.jpg 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<h2 id=\"usecallbackï¼šç¼“å­˜å›è°ƒå‡½æ•°é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“\" style=\"position:relative;\"><a href=\"#usecallback%EF%BC%9A%E7%BC%93%E5%AD%98%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E9%81%BF%E5%85%8D%E5%AD%90%E7%BB%84%E4%BB%B6%E9%87%8D%E5%A4%8D%E6%B8%B2%E6%9F%93\" aria-label=\"usecallbackï¼šç¼“å­˜å›è°ƒå‡½æ•°é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useCallbackï¼šç¼“å­˜å›è°ƒå‡½æ•°(é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“)</h2>\n<p><code class=\"language-text\">const cb = useCallback(fn,deps)</code><br>\nè¿™é‡Œçš„ fn æ˜¯å®šä¹‰çš„å›è°ƒå‡½æ•°ï¼Œdeps æ˜¯ä¾èµ–çš„å˜é‡æ•°ç»„ã€‚åªæœ‰å½“æŸä¸ªä¾èµ–å˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°å£°æ˜ fn è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚</p>\n<blockquote>\n<p>åœ¨ react å‡½æ•°ç»„ä»¶ä¸­ï¼Œæ¯ä¸€æ¬¡çš„ ui å˜åŒ–ï¼Œéƒ½æ˜¯é€šè¿‡é‡æ–°æ‰§è¡Œå‡½æ•°æ¥å®Œæˆäº†ï¼Œå’Œ class ç»„ä»¶ä¸ä¸€æ ·ï¼Œæ²¡æœ‰ä¸€ä¸ªç›´æ¥çš„æ–¹å¼åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ç»´æŒä¸€ä¸ªçŠ¶æ€ã€‚</p>\n</blockquote>\n<p>å¦‚ä¸‹ï¼Œæ¯æ¬¡åˆ›å»ºæ–°å‡½æ•°ä¼šè®©æ¥æ”¶äº‹ä»¶å¤„ç†å‡½æ•°çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChirden</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>state <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// æ¯æ¬¡åˆ›å»ºæ–°å‡½æ•°çš„æ–¹å¼ä¼šè®©æ¥æ”¶äº‹ä»¶å¤„ç†å‡½æ•°çš„ç»„ä»¶é‡æ–°æ¸²æŸ“</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Children</span></span> <span class=\"token attr-name\">handler</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleChirden<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>æ‰€ä»¥ <code class=\"language-text\">useCallback</code> å¯ä»¥é€šè¿‡å®šä¹‰ä¾èµ–é¡¹ï¼šåªæœ‰å½“<code class=\"language-text\">deps</code>å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰éœ€è¦é‡æ–°å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useCallback <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// åªæœ‰å½“stateå‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°åˆ›å»ºå›è°ƒå‡½æ•°</span>\n  <span class=\"token keyword\">const</span> handleChirden <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>state <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Children</span></span> <span class=\"token attr-name\">handler</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleChirden<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"usememoï¼šç¼“å­˜è®¡ç®—çš„ç»“æœï¼ˆé¿å…é‡å¤è®¡ç®—ã€é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“ï¼‰\" style=\"position:relative;\"><a href=\"#usememo%EF%BC%9A%E7%BC%93%E5%AD%98%E8%AE%A1%E7%AE%97%E7%9A%84%E7%BB%93%E6%9E%9C%EF%BC%88%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E8%AE%A1%E7%AE%97%E3%80%81%E9%81%BF%E5%85%8D%E5%AD%90%E7%BB%84%E4%BB%B6%E9%87%8D%E5%A4%8D%E6%B8%B2%E6%9F%93%EF%BC%89\" aria-label=\"usememoï¼šç¼“å­˜è®¡ç®—çš„ç»“æœï¼ˆé¿å…é‡å¤è®¡ç®—ã€é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“ï¼‰ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useMemoï¼šç¼“å­˜è®¡ç®—çš„ç»“æœï¼ˆé¿å…é‡å¤è®¡ç®—ã€é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“ï¼‰</h2>\n<p><code class=\"language-text\">const result = useMemo(fn,deps)</code><br>\nè¿™é‡Œçš„ fn æ˜¯äº§ç”Ÿæ‰€éœ€æ•°æ®çš„ä¸€ä¸ªè®¡ç®—å‡½æ•°ã€‚é€šå¸¸æ¥è¯´ï¼Œfn ä¼šä½¿ç”¨ deps ä¸­å£°æ˜çš„ä¸€äº›å˜é‡æ¥ç”Ÿæˆä¸€ä¸ªç»“æœæ²¡ç”¨æ¥æ¸²æŸ“å‡ºæœ€ç»ˆçš„ uiã€‚</p>\n<blockquote>\n<p>åœºæ™¯ï¼šå¦‚æœæŸä¸ªæ•°æ®æ—¶é€šè¿‡å…¶ä»–æ•°æ®è®¡ç®—å¾—åˆ°çš„ï¼Œé‚£ä¹ˆåªæœ‰å½“ç”¨åˆ°çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–é¡¹çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰éœ€è¦é‡æ–°è®¡ç®—ã€‚</p>\n</blockquote>\n<h3 id=\"é¿å…é‡å¤è®¡ç®—\" style=\"position:relative;\"><a href=\"#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E8%AE%A1%E7%AE%97\" aria-label=\"é¿å…é‡å¤è®¡ç®— permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>é¿å…é‡å¤è®¡ç®—</h3>\n<p>ä¸¾ä¸ª ğŸŒ°ï¼šå½“ä½ éœ€è¦æ ¹æ®è´­ç‰©è½¦ç­›é€‰å‡ºä½ æƒ³è¦çš„å•†å“æ—¶ï¼Œä½ å¯èƒ½ä¼šå¦‚ä¸‹å®ç°ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Demo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// åç«¯è¿”å›çš„è´­ç‰©è½¦æ•°æ®</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>shopCart<span class=\"token punctuation\">,</span>setShopCart<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// æœç´¢å…³é”®è¯</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>keyWord<span class=\"token punctuation\">,</span>setKeyWord<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token punctuation\">[</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">let</span> goods <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>shopCart<span class=\"token operator\">?.</span>length<span class=\"token operator\">></span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> keyWord<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// æ¯æ¬¡éƒ½ä¼šé‡æ–°è¿‡æ»¤</span>\n    goods <span class=\"token operator\">=</span> shopCart<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">good</span> <span class=\"token operator\">=></span> good<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>keyWord<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>goods<span class=\"token operator\">?.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">good</span> <span class=\"token operator\">=></span> good<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç»„ä»¶çš„æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¿›è¡Œä¸€æ¬¡è¿‡æ»¤æ“ä½œï¼Œä½†ä½ åªéœ€è¦åœ¨è´­ç‰©è½¦æ•°æ®å’Œå…³é”®è¯æŸä¸€ä¸ªæ•°æ®å˜åŒ–æ—¶ï¼Œæ‰é‡æ–°è®¡ç®—éœ€è¦å±•ç¤ºçš„æ•°æ®å°±è¡Œäº†ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//..</span>\n<span class=\"token comment\">// ä½¿ç”¨useMemç¼“å­˜è®¡ç®—ç»“æœ</span>\ngoods <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> shopCart<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">good</span> <span class=\"token operator\">=></span> good<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>keyWord<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>shopCart<span class=\"token punctuation\">,</span> keyWord<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//..</span></code></pre></div>\n<h3 id=\"é¿å…é‡å¤æ¸²æŸ“\" style=\"position:relative;\"><a href=\"#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E6%B8%B2%E6%9F%93\" aria-label=\"é¿å…é‡å¤æ¸²æŸ“ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>é¿å…é‡å¤æ¸²æŸ“</h3>\n<blockquote>\n<p>useCallback çš„åŠŸèƒ½å…¶å®å¯ä»¥ç”¨ useMemo æ¥å®ç°ã€‚</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> cb <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// è¿”å›ä¸€ä¸ªå‡½æ•°ä½œä¸ºç¼“å­˜ç»“æœ</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// åœ¨è¿™é‡Œè¿›è¡Œäº‹ä»¶å¤„ç†</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>deps<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>æ€»ç»“ï¼šè¿™ä¸¤ä¸ª API åªæ˜¯åšäº†åŒä¸€ä»¶äº‹æƒ…ï¼š<b>å»ºç«‹äº†ä¸€ä¸ªç»‘å®šæŸä¸ªç»“æœåˆ°ä¾èµ–æ•°æ®çš„å…³ç³»ã€‚åªæœ‰å½“ä¾èµ–å˜äº†ï¼Œè¿™ä¸ªç»“æœæ‰éœ€è¦è¢«é‡æ–°è®¡ç®—å¾—åˆ°</b></p>\n<h2 id=\"userefï¼šåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®\" style=\"position:relative;\"><a href=\"#useref%EF%BC%9A%E5%9C%A8%E5%A4%9A%E6%AC%A1%E6%B8%B2%E6%9F%93%E4%B9%8B%E9%97%B4%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE\" aria-label=\"userefï¼šåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ® permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useRefï¼šåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®</h2>\n<p><code class=\"language-text\">const ref = useRef(initialValue)</code><br>\næˆ‘ä»¬å¯ä»¥æŠŠ useRef çœ‹åšæ˜¯åœ¨å‡½æ•°ç»„ä»¶ä¹‹å¤–åˆ›å»ºçš„ä¸€ä¸ªå®¹å™¨ç©ºé—´ã€‚åœ¨è¿™ä¸ªå®¹å™¨ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å”¯ä¸€çš„ current å±æ€§è®¾ç½®ä¸€ä¸ªå€¼ï¼Œä»è€Œåœ¨å‡½æ•°ç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«è¿™ä¸ªå€¼ã€‚</p>\n<blockquote>\n<p>åœ¨ç±»ç»„ä»¶å¯ä»¥å®šä¹‰ç±»çš„æˆå‘˜å˜é‡ï¼ˆå±æ€§ï¼‰ï¼Œä»¥ä¾¿èƒ½åœ¨å¯¹è±¡ä¸Šé€šè¿‡æˆå‘˜å±æ€§å»ä¿å­˜ä¸€äº›æ•°æ®ã€‚ä½†æ˜¯åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæ˜¯æ²¡æœ‰è¿™æ ·ä¸€ä¸ªç©ºé—´å»ä¿å­˜æ•°æ®çš„ã€‚</p>\n</blockquote>\n<p>ä¸¾ä¸ª ğŸŒ°ï¼šä¿å­˜è®¡æ—¶å™¨çš„å¼•ç”¨ï¼Œæ“ä½œè®¡æ—¶å™¨çš„å¼€å§‹å’Œæš‚åœ</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> timer <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// å¼€å§‹è®¡æ—¶å™¨</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleStart</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  timer<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ä¸€äº›æ“ä½œ</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// æš‚æ—¶è®¡æ—¶å™¨</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handlePause</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span>\n  timer<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ä¿å­˜æŸä¸ª-dom-èŠ‚ç‚¹çš„å¼•ç”¨\" style=\"position:relative;\"><a href=\"#%E4%BF%9D%E5%AD%98%E6%9F%90%E4%B8%AA-dom-%E8%8A%82%E7%82%B9%E7%9A%84%E5%BC%95%E7%94%A8\" aria-label=\"ä¿å­˜æŸä¸ª dom èŠ‚ç‚¹çš„å¼•ç”¨ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ä¿å­˜æŸä¸ª DOM èŠ‚ç‚¹çš„å¼•ç”¨</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">TextInputWithFocusButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> inputEl <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onButtonClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// currentå±æ€§æŒ‡å‘äº†çœŸå®çš„inputè¿™ä¸ªdomèŠ‚ç‚¹ï¼Œä»è€Œå¯ä»¥è°ƒç”¨focusæ–¹æ³•</span>\n    inputEl<span class=\"token punctuation\">,</span> current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>inputEl<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"æ€è€ƒusestate-ä¹Ÿå¯ä»¥åœ¨å¤šå°‘æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®ï¼Œé‚£ä¹ˆèƒ½å¦ä½¿ç”¨-state-æ¥ä¿å­˜-useref-ä¾‹å­ä¸­çš„-timer-å‘¢ï¼Ÿ\" style=\"position:relative;\"><a href=\"#%E6%80%9D%E8%80%83usestate-%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%A4%9A%E5%B0%91%E6%B8%B2%E6%9F%93%E4%B9%8B%E9%97%B4%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE%EF%BC%8C%E9%82%A3%E4%B9%88%E8%83%BD%E5%90%A6%E4%BD%BF%E7%94%A8-state-%E6%9D%A5%E4%BF%9D%E5%AD%98-useref-%E4%BE%8B%E5%AD%90%E4%B8%AD%E7%9A%84-timer-%E5%91%A2%EF%BC%9F\" aria-label=\"æ€è€ƒusestate ä¹Ÿå¯ä»¥åœ¨å¤šå°‘æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®ï¼Œé‚£ä¹ˆèƒ½å¦ä½¿ç”¨ state æ¥ä¿å­˜ useref ä¾‹å­ä¸­çš„ timer å‘¢ï¼Ÿ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>æ€è€ƒ:useState ä¹Ÿå¯ä»¥åœ¨å¤šå°‘æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®ï¼Œé‚£ä¹ˆèƒ½å¦ä½¿ç”¨ state æ¥ä¿å­˜ useRef ä¾‹å­ä¸­çš„ timer å‘¢ï¼Ÿ</h2>\n<p>å½“ç„¶å¯ä»¥ï¼Œåªæ˜¯ useRef æ›´ä¼˜ã€‚æ›´æ–° state ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ï¼Œè€Œ ref æ˜¯ä¸ä¼šçš„ã€‚</p>"},"primaryTag":{"name":"React","color":null}},"pageContext":{"postId":"b48d4c82-b192-52d6-b763-e5387ee42f3e","primaryTag":"React"}},"staticQueryHashes":["1116962356","2275848304","3097946992","3138592700","3462520645"]}